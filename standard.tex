% !TeX program = XeLaTeX
% !TeX encoding = UTF-8
\documentclass[fontsize=12pt]{scrartcl}

\usepackage[USenglish]{babel}
\usepackage{xunicode}
\usepackage{xltxtra}
\usepackage{xeCJK}
\setCJKmainfont{IPAexMincho}
\usepackage{lmodern}
\usepackage{xspace}
\usepackage{minted}
\usepackage{amssymb}
\usepackage[autostyle=true]{csquotes}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{url}
\usepackage{float}
\usepackage{hyperref}
\hypersetup{colorlinks,urlcolor=blue,linkcolor=blue,citecolor=black}
\usepackage[most]{tcolorbox}
\usepackage{fancyvrb,newverbs,mdframed}
\usepackage[automark,headsepline,footsepline,markuppercase]{scrpage2}

\definecolor{cverbbg}{gray}{0.95}
\definecolor{quote-blue}{rgb}{0.95,0.97,0.98}
\newtcolorbox{myquote}{colback=quote-blue,grow to right by=-10mm,grow to left by=-10mm,
    boxrule=0pt,boxsep=0pt,breakable}
    
\makeatletter
\def\@xobeysp{\mbox{}\space}
\def\verbatim@font{\footnotesize\ttfamily\raggedright}
\makeatother

\begin{document}

    \setromanfont{Liberation Serif}
    \setsansfont{Liberation Sans}
    \setmonofont{Source Code Pro}

    \renewenvironment{verbatim}
    {\VerbatimEnvironment
     \begin{mdframed}[backgroundcolor=cverbbg,topline=false,bottomline=false,rightline=false,leftline=false]
     \begin{Verbatim}[fontsize=\footnotesize]}
    {\end{Verbatim}
     \end{mdframed}}
    
    \usemintedstyle{manni}
    \setminted[rust]{
      breaklines=true,
      samepage=false,
      fontsize=\footnotesize,
      tabsize=4,
      bgcolor=cverbbg,
      encoding=utf-8,
      outencoding=utf-8,
    }
    
    \newenvironment{rustc}
    {\VerbatimEnvironment
     \vspace{0.5em}
     \begin{minted}{rust}}
    {\end{minted}
     \vspace{0.5em}}
    
    \newcommand{\code}[1]{\texttt{\textcolor{red!60!black}{#1}}}
    \newcommand{\blank}{\vspace{\baselineskip}}
    \newcommand{\myparagraph}[1]{\paragraph{#1}\mbox{}\\}
    
    % A few macros for emphasized variable names and keywords
    \newcommand{\x}{\code{x}}
    \newcommand{\y}{\code{y}}
    \newcommand{\z}{\code{z}}
    \newcommand{\struct}{\code{struct}}
    \newcommand{\mut}{\code{mut}}
    \newcommand{\varchar}{\code{char}}
    \newcommand{\println}{\code{println!}}
    \newcommand{\panic}{\code{panic!}}
    \newcommand{\keylet}{\code{let}}
    \newcommand{\enum}{\code{enum}}
    \newcommand{\String}{\code{String}}
    \newcommand{\match}{\code{match}}
    \newcommand{\keyref}{\code{ref}}
    \newcommand{\itt}{\code{i32}}
    \newcommand{\keyif}{\code{if}}
    
    \clearscrheadfoot
    \cfoot[Page \pagemark]{Page \pagemark}
    \ohead{\rightmark}
    \automark[subsection]{section}
    \pagestyle{scrheadings}
    
    \include{src/title}
    \pagebreak
    
    \tableofcontents
    \pagebreak

    \pagebreak
    \section{Introduction}
    \label{sec:intro}
    \input{src/introdcution.tex}
    
    \pagebreak
    \section{Getting Started}
    \label{sec:gettingstarted}
    \input{src/gettingstarted.tex}
    
    \pagebreak
    \section{Tutorial: Guessing Game}
    \label{sec:tutorial}
    \input{src/tutorial.tex}
    
    \pagebreak
    \section{Syntax and Semantics}
    \label{sec:syntax}
    \input{src/syntax.tex}
    
    \pagebreak
    \section{Effective Rust}
    \label{sec:effective_rust}
    
    \pagebreak
    \section{Nightly Rust}
    \label{sec:nightly_rust}
    
    \pagebreak
    \section{Glossary}
    \label{sec:glossary}
    \input{src/glossary.tex}
    
    \pagebreak
    \section{Syntax Index}
    \label{sec:syntax_index}
    
    \pagebreak
    \section{Bibliography}
    \label{sec:bib}
    \input{src/bibliography.tex}
    
\end{document}
